#!/bin/sh

export GOPATH=$PWD/
export GOMAXPROCS=1


# Abort on errors after this point ...
set -e

. ./configure
. ./format

echo ""
echo ".................................................................."
echo "Running tests ...................................................."
echo ".................................................................."
echo ""

go test -v ./map_to_ptrs/... || exit $?

echo ""
echo ".................................................................."
echo "Finished tests ..................................................."
echo ".................................................................."
echo ""


echo ""
echo ".................................................................."
echo "Running benchmarks ..............................................."
echo ".................................................................."
echo ""

# Add "-v" to see all the skipped unit tests:
go test -bench=".*" -short ./map_to_ptrs/ || exit $?

echo ""
echo ".................................................................."
echo "Finished tests ..................................................."
echo ".................................................................."
echo ""
